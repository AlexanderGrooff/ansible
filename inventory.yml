all:
  hosts:
    zeta:
      ansible_host: 100.108.145.81
      tailscale_ip: 100.108.145.81
      external_ip: 2.56.214.72
      external_interface: eth0
    theta:
      ansible_host: 100.67.199.75
      tailscale_ip: 100.67.199.75
      external_ip: 116.203.149.177
      external_interface: eth0

storage_servers:
  hosts:
    theta:
      bricks:
      - /bricks/brick1

storage_clients:
  hosts:
    theta:
      remote_mounts:
      - src: "localhost:/nomad_data"
        dest: "/data/shared/nomad"
    zeta:
      remote_mounts:
      - src: "theta:/nomad_data"
        dest: "/data/shared/nomad"

nomad:
  hosts:
    zeta:
      datacenter: dc1
    theta:
      datacenter: dc1
  children:
    nomad_servers:
      hosts:
        zeta:
        theta:
    nomad_clients:
  vars:
    consul_secret_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35643833323765643863356136663337663961646264633539656338626130356131346433363133
          6237653338616634313166653633626138636435633865610a333366623131323536616631656664
          37313033646666333761353235626465666531666334363263313133306330356538353962393762
          3831626361393836320a343265623466653233633735316162306138383339646665383733386136
          63333230643361653736356131393064373631616261326261643464343434303565396231653431
          3239346561373565353231386139383530376135616262633362
    nomad_tailscale_ips: "{{ groups['nomad_servers'] | map('extract', hostvars) | map(attribute='tailscale_ip') | list }}"
    nomad_volumes:
    - name: postgres
      dir: "/data/shared/nomad/postgres"
      read_only: "false"  # Quotes are important, otherwise it fills in Python's False
    - name: registry
      dir: "/data/shared/nomad/registry"
      read_only: "false"
    - name: certbot
      dir: "/data/shared/nomad/certbot"
      read_only: "false"
    nginx_domains:
    - "alex.home"
    - "docker.alex.home"
    letsencrypt:
      email: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30396262343139346130343031343335326239643765653661333936363366653133373564363832
          3632343435353666653763623135363233303935326132610a646363653236336564666334653162
          61653662616438383736396233626632373438366664666330653238303539636134346562323838
          3036616438663539370a373138616438396666333839643232323463323732656264633465393536
          30323537666635643533663539336233363033396636646561656137656164303935
      cloudflare_api_token: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30636138626339626561643439343663396130623637373563316463383635373833313862646430
          3363306337323530633733356561303830623162653964620a383938383961313337376639373661
          32613966336332666230303237393938656134623338653466353833626565306565363730363364
          3932623165316264640a346562666131656535343339633431613165616636313466313137323335
          31326131383634303164653136666139393361346531656332343936646636626638666364326238
          6262353263343266346133623933303663333463366237633236
