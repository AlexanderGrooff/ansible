all:
  # Default values
  vars:
    tailscale:
      enable: true
    firewall:
      enable: true
    desktop:
      enable: false
      wm: i3

  hosts:
    zeta:
      ansible_host: 100.108.145.81
      tailscale_ip: 100.108.145.81
      external_ip: 2.56.214.72
      external_interface: eth0
    theta:
      ansible_host: 100.67.199.75
      tailscale_ip: 100.67.199.75
      external_ip: 116.203.149.177
      external_interface: eth0
    delta:
      desktop:
        enable: true
        wm: sway
      tailscale:
        enable: true
        auth_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          34363835636631646436626664636135643061306433316635396231383364363739636138613663
          3633333064353465393234326631303135626330303637320a343031643736363961356134393432
          66656432613561613635353537623834383034396562353031356135303166346266376134366336
          3733353331626163610a643036393434393639623639366465326638363932343766336534343730
          63656435646635343838313038313766663137353330653436343835323336303239653962623030
          3432626465383166663930326662626431643030656265656331
    omega:
      tailscale:
        auth_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31663761353033346332323736623133386262346538653364373432306139656238383265326166
          6537303438363065646130313537623039343035346634330a636431333736373436333834343631
          33353466316631623733613135346334656462643431346532323530343736303264343464313162
          3936643434626232350a663965653363393261613533383930396134656236366139383133366166
          39633361663235303662643333383563336239393330333865623465353238616637313962326539
          3839326261623030353731306236613930376262363234613065
        enable: true
      desktop:
        enable: true
        wm: sway

storage_servers:
  hosts:
    theta:
      bricks:
      - /bricks/brick1

storage_clients:
  hosts:
    theta:
      remote_mounts:
      - src: "localhost:/nomad_data"
        dest: "/data/shared/nomad"
    zeta:
      remote_mounts:
      - src: "theta:/nomad_data"
        dest: "/data/shared/nomad"

nomad:
  hosts:
    zeta:
      datacenter: dc1
    theta:
      datacenter: dc1
  children:
    nomad_servers:
      hosts:
        zeta:
        theta:
    nomad_clients:
  vars:
    consul_secret_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35643833323765643863356136663337663961646264633539656338626130356131346433363133
          6237653338616634313166653633626138636435633865610a333366623131323536616631656664
          37313033646666333761353235626465666531666334363263313133306330356538353962393762
          3831626361393836320a343265623466653233633735316162306138383339646665383733386136
          63333230643361653736356131393064373631616261326261643464343434303565396231653431
          3239346561373565353231386139383530376135616262633362
    nomad_tailscale_ips: "{{ groups['nomad_servers'] | map('extract', hostvars) | map(attribute='tailscale_ip') | list }}"
    nomad_volumes:
    - name: n8n
      dir: "/data/shared/nomad/postgres"
      read_only: "false"  # Quotes are important, otherwise it fills in Python's False
    - name: fingerprint
      dir: "/data/shared/nomad/fingerprint"
      read_only: "false"
    - name: registry
      dir: "/data/shared/nomad/registry"
      read_only: "false"
    - name: certbot
      dir: "/data/shared/nomad/certbot"
      read_only: "false"
    - name: static
      dir: "/data/shared/nomad/static"
      read_only: "false"
    nginx_domains:
    - "alex.home"
    - "docker.alex.home"
    - "n8n.alex.home"
    - "fingerprint.alex.home"
    letsencrypt:
      email: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30396262343139346130343031343335326239643765653661333936363366653133373564363832
          3632343435353666653763623135363233303935326132610a646363653236336564666334653162
          61653662616438383736396233626632373438366664666330653238303539636134346562323838
          3036616438663539370a373138616438396666333839643232323463323732656264633465393536
          30323537666635643533663539336233363033396636646561656137656164303935
      cloudflare_api_token: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30636138626339626561643439343663396130623637373563316463383635373833313862646430
          3363306337323530633733356561303830623162653964620a383938383961313337376639373661
          32613966336332666230303237393938656134623338653466353833626565306565363730363364
          3932623165316264640a346562666131656535343339633431613165616636313466313137323335
          31326131383634303164653136666139393361346531656332343936646636626638666364326238
          6262353263343266346133623933303663333463366237633236
    fingerprint:
      secret_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          37616162616130353561303838653063613334353437373563663232646562386262643730316532
          3934303635306435373131613836643930363834613032660a363365663837663334393966643833
          32346533333731326439373034663638373739326162613538316638323166353739623062613063
          3130663763633938370a396631396163663232386132316463666164356332666133646365343263
          34333633343834373638383832633536333762653365616165646663623764333634666634393731
          32323934386531646337613366313263393237636635643665376133346561636436353761623637
          38623035656564323437653231353262306232393531303562653666626332323461643237616566
          65353533636430383430363965626538326430313066626136666261343838666466356565613565
          38336266353531393136353563653634396337653932653633306131333930326136313535386165
          33323439623831303162393333393037356633666432353334363362626263633039663964646465
          626338316432636336653931633233386138
